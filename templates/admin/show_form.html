{% extends 'base.html' %}
{% block content %}
<h2 class="mb-3">{{ 'Edit' if item else 'Add' }} Show</h2>
<form method="post" class="row g-3">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <div class="col-md-6">
    <label class="form-label">Screen</label>
    <select name="screen_id" class="form-select" required>
      <option value="">Select...</option>
      {% for s in screens %}
        {% set sel = item and item.screen_id == s.screen_id %}
        <option value="{{ s.screen_id }}" {{ 'selected' if sel else '' }}>{{ s.city }} — {{ s.theatre_name }} — {{ s.screen_name }} (cap: {{ s.capacity }})</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-6">
    <label class="form-label">Movie</label>
    <select name="movie_id" class="form-select" required>
      <option value="">Select...</option>
      {% for m in movies %}
        {% set sel = item and item.movie_id == m.movie_id %}
        <option value="{{ m.movie_id }}" {{ 'selected' if sel else '' }}>{{ m.title }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-4">
    <label class="form-label">Date</label>
    <input type="date" name="show_date" class="form-control" value="{{ item.show_date if item else '' }}" required>
  </div>
  <div class="col-md-4">
    <label class="form-label">Time</label>
    <input type="time" name="show_time" class="form-control" value="{{ item.show_time if item else '' }}" required>
  </div>
  <div class="col-md-4">
    <label class="form-label">Price Type</label>
    {% set pt = item.price_type if item else 'standard' %}
    <select name="price_type" class="form-select">
      <option value="standard" {{ 'selected' if pt=='standard' else '' }}>Standard</option>
      <option value="premium" {{ 'selected' if pt=='premium' else '' }}>Premium</option>
      <option value="vip" {{ 'selected' if pt=='vip' else '' }}>VIP</option>
    </select>
  </div>
  <div class="col-md-4">
    <label class="form-label">Base Price</label>
    <input type="number" step="0.01" name="base_price" class="form-control" value="{{ item.base_price if item else '' }}" min="0" required>
  </div>
  <div class="col-12 d-flex gap-2">
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('shows_admin.shows_list') }}">Cancel</a>
  </div>
</form>
{% endblock %}
